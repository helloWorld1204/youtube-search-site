<!DOCTYPE html>
<html>
<head>
  <title>유튜브 검색기</title>
  <style>
    #results img {
      width: 200px;
      cursor: pointer;
      margin-bottom: 10px;
    }
    #results div {
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <h1>유튜브 검색기</h1>
  <input type="text" id="query" placeholder="검색어 입력">
  <button onclick="searchYouTube()">검색</button>
  <div id="results"></div>
  <div id="player" style="margin-top:20px;"></div>

  <script>
    const API_KEY = 'AIzaSyAg8VtZGOoDdhuDIvZoTELDNvcdcj7aBZQ'; // ⭐ 본인 API 키로 바꿔줘 ⭐

    function searchYouTube() {
      const query = document.getElementById('query').value;
      const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=5&q=${encodeURIComponent(query)}&key=${API_KEY}`;

      fetch(url)
        .then(response => response.json())
        .then(data => {
          const resultsDiv = document.getElementById('results');
          resultsDiv.innerHTML = '';
          data.items.forEach(item => {
            if (item.id.kind === 'youtube#video') {
              const videoId = item.id.videoId;
              const thumbnail = item.snippet.thumbnails.medium.url;
              const title = item.snippet.title;
              const div = document.createElement('div');
              div.innerHTML = `
                <img src="${thumbnail}" onclick="playVideo('${videoId}')"><br>
                <strong>${title}</strong>
              `;
              resultsDiv.appendChild(div);
            }
          });
        })
        .catch(error => {
          console.error('검색 중 오류 발생:', error);
          alert('검색 중 문제가 발생했습니다.');
        });
    }

    function playVideo(videoId) {
      const playerDiv = document.getElementById('player');
      playerDiv.innerHTML = `
        <iframe width="560" height="315"
          src="https://www.youtube.com/embed/${videoId}"
          frameborder="0" allowfullscreen>
        </iframe>
      `;
    }
  </script>
</body>
</html>
